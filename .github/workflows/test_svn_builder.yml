

name: SVNBox

on: [push]



jobs:
  svn-build-job:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        name: Checkout code
        
      - uses: docker/build-push-action@v2
        id: docker_build
        name: Build docker image
        with:
          context: ./tests/custom_svn_box
          file: ./tests/custom_svn_box/Dockerfile
          push: false
          tags: rsvn_box
      -
        name: Image digest
        run: echo ${{ steps.docker_build.outputs.digest }}



  svn-job:
    runs-on: ubuntu-latest
    services:
      image: ${{ jobs.svn-build-job.steps.docker_build.outputs.digest }} 

    steps:
      - uses: actions/checkout@v2
        name: Checkout code

    needs: [svn-build-job]


  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        name: Checkout code
    
      - name: Run Svn command
        run: svn co svn://localhost:3690/Test Test


    needs: [svn-job]
